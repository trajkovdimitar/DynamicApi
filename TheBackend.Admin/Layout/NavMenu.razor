<nav class="nav-menu bg-dark text-light p-3">
    <div class="logo mb-3 text-center">
        <img src="https://source.unsplash.com/random/64x64?logo" alt="Logo" />
    </div>
    <ul class="nav flex-column">
        <li class="nav-item mb-2">
            <NavLink class="nav-link text-light" href="" Match="NavLinkMatch.All">
                <i class="bi bi-house"></i>
                Home
            </NavLink>
        </li>
        <li class="nav-item mb-2">
            <NavLink class="nav-link text-light" href="models">
                <i class="bi bi-list"></i>
                Models
            </NavLink>
        </li>
        <li class="nav-item mb-2">
            <NavLink class="nav-link text-light" href="data">
                <i class="bi bi-table"></i>
                Data
            </NavLink>
        </li>
        <li class="nav-item mb-2">
            <button class="btn btn-sm text-light w-100 text-start" @onclick="ToggleCollections">
                <i class="bi bi-collection"></i>
                Collections
            </button>
            @if (showCollections && collections != null)
            {
                <ul class="nav flex-column ms-3 mt-1">
                    @foreach (var c in collections)
                    {
                        <li class="nav-item mb-1">
                            <NavLink class="nav-link text-light" href="@($"/collections/{c.ModelName}")">
                                <i class="bi bi-folder"></i>
                                @c.ModelName
                            </NavLink>
                        </li>
                    }
                </ul>
            }
        </li>
    </ul>
</nav>

@code {
    [Inject] private ApiClient Api { get; set; } = default!;

    private List<ModelDefinition>? collections;
    private bool showCollections;

    protected override async Task OnInitializedAsync()
    {
        collections = await Api.GetAsync<List<ModelDefinition>>("api/models");
    }

    private void ToggleCollections()
    {
        showCollections = !showCollections;
    }
}
